import{D as s}from"./DocsCodeBlock-vrnmwhSA.js";import{D as o}from"./DocsCallout-DRXeuY10.js";import{D as c}from"./DocsLinkCard-CiAJ9-fb.js";import{D as l,a as v}from"./DocsPageHeader-eA4hMhgw.js";import{u as p}from"./useDocHeadings-CsEjSeXR.js";import{d as g,i as u,c as m,b as d,a as e,k as i,w as r,m as t,o as y}from"./index-C-iaNavr.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";const b={class:"docs-article"},w={class:"docs-content"},J=`# Initialize profiling session
java -jar jeffrey-cli.jar init /path/to/config.conf > /tmp/jeffrey.env

# Source environment variables
source /tmp/jeffrey.env

# Start application with profiling (using JEFFREY_PROFILER_CONFIG)
java $JEFFREY_PROFILER_CONFIG -jar my-app.jar`,j=`# With jdk-java-options enabled in config, JDK_JAVA_OPTIONS is set automatically
java -jar jeffrey-cli.jar init /path/to/config.conf > /tmp/jeffrey.env
source /tmp/jeffrey.env

# JDK_JAVA_OPTIONS is picked up automatically by the JVM
java -jar my-app.jar`,C=`#!/bin/bash
# Generate profiling environment
java -jar /jeffrey-libs/jeffrey-cli.jar init /app/jeffrey.conf > /tmp/jeffrey.env
source /tmp/jeffrey.env

# Start application (JDK_JAVA_OPTIONS picked up automatically)
exec java -jar /app/my-app.jar`,I=g({__name:"CliOverviewPage",setup(k){const{setHeadings:n}=p(),f=[{id:"what-is-jeffrey-cli",text:"What is Jeffrey CLI?",level:2},{id:"recording-sessions",text:"Recording Sessions",level:2},{id:"installation",text:"Installation",level:2},{id:"integration",text:"Integration with Jeffrey",level:2}];return u(()=>{n(f)}),(O,a)=>(y(),m("article",b,[d(l,{title:"Jeffrey CLI",icon:"bi bi-terminal"}),e("div",w,[a[2]||(a[2]=i('<p data-v-619f809d>Jeffrey CLI is a command-line tool that <strong data-v-619f809d>configures JVM processes</strong> for profiling, especially in containerized environments.</p><h2 id="what-is-jeffrey-cli" data-v-619f809d>What is Jeffrey CLI?</h2><p data-v-619f809d>Jeffrey CLI (<code data-v-619f809d>jeffrey-cli.jar</code>) reads a HOCON configuration file and generates environment variables containing JVM flags. These environment variables are then used by your target JVM process.</p><div class="how-it-works" data-v-619f809d><div class="flow-step" data-v-619f809d><div class="docs-icon docs-icon-md docs-icon-purple" data-v-619f809d><i class="bi bi-file-earmark-code" data-v-619f809d></i></div><div class="flow-content" data-v-619f809d><strong data-v-619f809d>HOCON Config</strong><p data-v-619f809d>Define features and settings</p></div></div><div class="flow-arrow" data-v-619f809d><i class="bi bi-arrow-right" data-v-619f809d></i></div><div class="flow-step" data-v-619f809d><div class="docs-icon docs-icon-md docs-icon-purple" data-v-619f809d><i class="bi bi-terminal" data-v-619f809d></i></div><div class="flow-content" data-v-619f809d><strong data-v-619f809d>Jeffrey CLI</strong><p data-v-619f809d>Generates JVM flags</p></div></div><div class="flow-arrow" data-v-619f809d><i class="bi bi-arrow-right" data-v-619f809d></i></div><div class="flow-step" data-v-619f809d><div class="docs-icon docs-icon-md docs-icon-purple" data-v-619f809d><i class="bi bi-filetype-java" data-v-619f809d></i></div><div class="flow-content" data-v-619f809d><strong data-v-619f809d>Environment Variable</strong><p data-v-619f809d>Used by target JVM</p></div></div></div><p data-v-619f809d>The CLI performs these tasks:</p><ul data-v-619f809d><li data-v-619f809d>Creates workspace/project/session directory structure</li><li data-v-619f809d>Generates JVM flags for async-profiler and enabled features</li><li data-v-619f809d>Outputs environment variables (<code data-v-619f809d>JEFFREY_PROFILER_CONFIG</code> or <code data-v-619f809d>JDK_JAVA_OPTIONS</code>)</li><li data-v-619f809d>Stores session metadata for Jeffrey to detect</li></ul><h3 data-v-619f809d>When to Use Jeffrey CLI</h3><p data-v-619f809d>Use Jeffrey CLI when you want to:</p><ul data-v-619f809d><li data-v-619f809d><strong data-v-619f809d>Containerized environments</strong> - Configure JVM profiling in Docker/Kubernetes</li><li data-v-619f809d><strong data-v-619f809d>CI/CD pipelines</strong> - Automated profiling during builds and tests</li><li data-v-619f809d><strong data-v-619f809d>Production monitoring</strong> - Continuous profiling with minimal overhead</li><li data-v-619f809d><strong data-v-619f809d>Multi-instance deployments</strong> - Each instance creates its own session</li></ul><h2 id="recording-sessions" data-v-619f809d>Recording Sessions</h2><p data-v-619f809d>A <strong data-v-619f809d>recording session</strong> is created each time the CLI runs - typically when your application is deployed or restarted. Each session gets a unique identifier and its own directory.</p>',11)),d(o,{type:"info"},{default:r(()=>[...a[0]||(a[0]=[e("strong",null,"New deployment = New session:",-1),t(" Every time your container starts or application restarts, Jeffrey CLI creates a fresh session. This keeps recordings organized and makes it easy to correlate profiling data with specific deployments. ",-1)])]),_:1}),a[3]||(a[3]=i('<h3 data-v-619f809d>Session Contents</h3><p data-v-619f809d>Each session directory can contain multiple file types:</p><div class="docs-grid docs-grid-3" data-v-619f809d><div class="docs-card session-card jfr" data-v-619f809d><div class="docs-card-header" data-v-619f809d><i class="bi bi-file-earmark-binary" data-v-619f809d></i><h4 data-v-619f809d>JFR Files</h4></div><div class="docs-card-body" data-v-619f809d><code data-v-619f809d>profile-*.jfr</code><p data-v-619f809d>Core profiling data with CPU samples, allocations, locks, and JVM events. Multiple chunk files are created during long-running sessions.</p></div></div><div class="docs-card session-card heap" data-v-619f809d><div class="docs-card-header" data-v-619f809d><i class="bi bi-memory" data-v-619f809d></i><h4 data-v-619f809d>Heap Dump</h4></div><div class="docs-card-body" data-v-619f809d><code data-v-619f809d>heap-dump.hprof.gz</code><p data-v-619f809d>Memory snapshot captured on OutOfMemoryError or JVM crash. Compressed with gzip for efficient storage.</p></div></div><div class="docs-card session-card logs" data-v-619f809d><div class="docs-card-header" data-v-619f809d><i class="bi bi-file-text" data-v-619f809d></i><h4 data-v-619f809d>JVM Logs</h4></div><div class="docs-card-body" data-v-619f809d><code data-v-619f809d>jfr-jvm.log</code><p data-v-619f809d>Structured JVM diagnostic logs including GC events, JIT compilation activity, and JFR-related messages.</p></div></div><div class="docs-card session-card perf" data-v-619f809d><div class="docs-card-header" data-v-619f809d><i class="bi bi-speedometer2" data-v-619f809d></i><h4 data-v-619f809d>Perf Counters</h4></div><div class="docs-card-body" data-v-619f809d><code data-v-619f809d>perf-counters.hsperfdata</code><p data-v-619f809d>JVM performance data captured via <code data-v-619f809d>-XX:+UsePerfData</code>. Contains low-level metrics about JVM internals.</p></div></div><div class="docs-card session-card metadata" data-v-619f809d><div class="docs-card-header" data-v-619f809d><i class="bi bi-info-circle" data-v-619f809d></i><h4 data-v-619f809d>Session Metadata</h4></div><div class="docs-card-body" data-v-619f809d><code data-v-619f809d>.session-info.json</code><p data-v-619f809d>Session ID, timestamps, project/workspace identifiers, profiler settings, and custom attributes (cluster, namespace).</p></div></div></div><h2 id="installation" data-v-619f809d>Installation</h2><p data-v-619f809d>Jeffrey CLI is included in the Jeffrey Docker image. For standalone use:</p><ol data-v-619f809d><li data-v-619f809d>Download <code data-v-619f809d>jeffrey-cli.jar</code> from <a href="https://github.com/petrbouda/jeffrey/releases" target="_blank" data-v-619f809d>GitHub Releases</a></li><li data-v-619f809d>Place it in your application&#39;s deployment package</li><li data-v-619f809d>For async-profiler support, also include <code data-v-619f809d>libasyncProfiler.so</code></li></ol><h3 data-v-619f809d>Basic Usage</h3><p data-v-619f809d>Using <code data-v-619f809d>JEFFREY_PROFILER_CONFIG</code> environment variable:</p>',8)),d(s,{language:"bash",code:J}),a[4]||(a[4]=e("h3",null,"Using JDK_JAVA_OPTIONS",-1)),a[5]||(a[5]=e("p",null,[t("When "),e("code",null,"jdk-java-options"),t(" is enabled in your config, the JVM flags are set via "),e("code",null,"JDK_JAVA_OPTIONS"),t(" which is automatically picked up by the JVM:")],-1)),d(s,{language:"bash",code:j}),d(o,{type:"tip"},{default:r(()=>[...a[1]||(a[1]=[e("strong",null,"JDK_JAVA_OPTIONS recommended:",-1),t(" Using ",-1),e("code",null,"jdk-java-options { enabled = true }",-1),t(" is the simplest approach for containers - the JVM automatically reads this environment variable without any command-line changes. ",-1)])]),_:1}),a[6]||(a[6]=e("h3",null,"Docker Entrypoint Example",-1)),d(s,{language:"bash",code:C}),d(c,{to:"/docs/cli/configuration",icon:"bi bi-gear",title:"Configuration",description:"Learn about HOCON configuration files, available options, features (heap dumps, JVM logging, messaging), and profiler backends."}),a[7]||(a[7]=i('<h2 id="integration" data-v-619f809d>Integration with Jeffrey</h2><p data-v-619f809d>Sessions created by Jeffrey CLI appear in Jeffrey&#39;s <strong data-v-619f809d>Repository</strong> feature within Live and Remote workspaces.</p><h3 data-v-619f809d>Workflow</h3><div class="workflow-steps" data-v-619f809d><div class="workflow-step" data-v-619f809d><div class="step-number" data-v-619f809d>1</div><div class="step-content" data-v-619f809d><strong data-v-619f809d>CLI Initializes Session</strong><p data-v-619f809d>Application starts with Jeffrey CLI, creating a new session directory</p></div></div><div class="workflow-step" data-v-619f809d><div class="step-number" data-v-619f809d>2</div><div class="step-content" data-v-619f809d><strong data-v-619f809d>Profiler Records Data</strong><p data-v-619f809d>JFR files and artifacts are written to the session directory</p></div></div><div class="workflow-step" data-v-619f809d><div class="step-number" data-v-619f809d>3</div><div class="step-content" data-v-619f809d><strong data-v-619f809d>Repository Detects Session</strong><p data-v-619f809d>Jeffrey&#39;s Repository page shows the session in Live/Remote workspace</p></div></div><div class="workflow-step" data-v-619f809d><div class="step-number" data-v-619f809d>4</div><div class="step-content" data-v-619f809d><strong data-v-619f809d>Merge and Copy</strong><p data-v-619f809d>Select specific JFR files from the session to merge into a Recording (+ download artifacts)</p></div></div><div class="workflow-step" data-v-619f809d><div class="step-number" data-v-619f809d>5</div><div class="step-content" data-v-619f809d><strong data-v-619f809d>Analyze Profile</strong><p data-v-619f809d>Create a Profile from the Recording and start analysis</p></div></div></div>',4))]),d(v)]))}}),E=h(I,[["__scopeId","data-v-619f809d"]]);export{E as default};
